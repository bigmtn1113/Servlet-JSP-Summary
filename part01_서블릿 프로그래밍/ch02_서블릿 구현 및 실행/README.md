# 2. 서블릿 구현 및 실행
서블릿을 사용하기 전에는 웹서버에서 외부 프로그램을 호출하고 수행 결과를 웹 브라우저로 전송하는 `CGI`(Common Gateway Interface)라는 기술을 사용한다.
그러나 CGI 기술은 동시 접속자가 많아질수록 처리 효율이 떨어지는 단점이 있다.

그래서 서블릿이 등장하게 되었다.

## 2.1 웹 애플리케이션
### 2.1.1. 웹 애플리케이션 접근
http://70.12.220.93:8080/edu/index.jsp에 클라이언트가 URL로 접근을 하는 과정이다.

1. IP가 70.12.220.93인 `컴퓨터`를 찾아간다.
2. 8080 포트를 사용하고 있는 `서버`를 찾아간다.
3. edu라는 이름의 `웹 애플리케이션`을 찾아간다.
4. /index.jsp `파일`을 찾아간다.

<br/>

### 2.1.2. 웹 애플리케이션 위치
웹서버마다 시작될 때 자동으로 애플리케이션으로 인식하여 서비스를 올려주는 디렉터리가 있다.  
WAS 종류에 따라 다를 수 있는데 tomcat은 `webapps` 디렉터리에 애플리케이션들이 있다.  
webapps 디렉터리에 있는 하위 디렉터리 또는 디렉터리가 압축된 war 파일은 하나의 애플리케이션으로 인식한다.  
만약 webapps 디렉터리 안에 5개의 애플리케이션 디렉터리가 있으면 현재 tomcat 서버는 5개의 애플리케이션을 서비스하고 있는 것이다.

웹 애플리케이션의 루트 디렉터리는 `"WebContent"`이다. 이 디렉터리가 webapps의 하위 디렉터리에 해당한다.  
윈도우 탐색기에선 디렉터리 이름이 WebContent가 아니라 웹 프로젝트 이름으로 표시된다.  
어차피 이 디렉터리는 URL에서 `"/"`라는 기호로 접근하므로 디렉터리 이름이 무엇인지는 상관없다.

<br/>

### 2.1.3. 웹 애플리케이션 구조
웹 애플리케이션은 하나의 디렉터리이다.  
이 디렉터리 안에 서비스하려는 문서들을 만들어 놓으면 웹에서 서비스되는 것이다.

그런데 반드시 모든 웹 애플리케이션이 공통으로 가져야 하는 디렉터리와 파일이 있다.  
바로 `WEB-INF` 디렉터리이며, WEB-INF 디렉터리에는 `web.xml` 파일이 있어야 한다.

현재 웹 애플리케이션에서 서비스하려는 클래스 파일이 있다면 `WEB-INF/classes` 디렉터리 안에 있어야 한다.  
클래스 파일들이 jar로 압축되어 있다면 `WEB-INF/lib` 디렉터리 안에 있어야 한다.  
왜냐하면 WAS를 구성하는 애플리케이션 서버들이 자동으로 인식할 수 있기 때문이다.

<br/>

### 2.1.4. 환경설정 파일: web.xml
web.xml은 웹 애플리케이션 실행에 관해 정의하는 `환경설정` 파일이며, 웹 애플리케이션 서비스 시작 시 웹서버가 읽어서 사용하는 파일이다.  

### 2.1.5. 서블릿 디렉터리
서블릿이 공식적으로 존재하는 디렉터리로서 모든 WAS의 구조가 같다.  
서블릿 프로그램 실행에 관련된 클래스 파일들은 `WEB-INf/classes` 디렉터리에 있어야만 `서블릿 컨테이너`가 인식하여 실행한다.  
이 디렉터리는 프로젝트 탐색 창에선 클래스 파일들을 직접 편집할 일이 없으므로 표시되지 않지만 윈도우 탐색기에선 표시된다.
